/ %li{:id => dom_id(@video_list)}
%li{:id => "widget_#{@video_list.id}"}
  .introduction.panel.margin-b30
    .body
      .cell.handle
        .section-title.float-left #{@video_list.name}
        .widget-actions.float-right
          = link_to '全部', show_community_video_list_path(@video_list.community, @video_list)
          - if can? :update, @video_list.community                    
            = link_to '添加', new_community_video_list_video_path(@video_list.community, @video_list)
            %a.widget-setting-link{:href => "#", :id => "#{@video_list.id}-settings"} 设置
            = link_to '删除', url_for_event(:delete_widget, :id => @video_list.section.id, :widget_id => @video_list.id), :confirm => 'Are you sure?', :method => 'delete', :remote => true
        
        .widget-setting{"data-id" => "#{@video_list.id}"}
          = form_for @video_list, :url => community_video_list_url(@video_list.community, @video_list)  do |f|
            %p
              = f.text_field :name
            %p  
              = f.submit "保存"
    .body
      .col.sizefill
        %div{:id => dom_id(@video_list)}
          %ul.nav
            - @video_list.videos.each do |v|
              %li
                .cell
                  %p #{v.title}
                  .stream
                    .video{:src => "#{v.src}"}
                      = link_to image_tag(v.thumb_url, :class=> "thumb"), show_community_video_url(v.community, v)
                      .play_video
               

  :javascript
    $(document).ready(function(){
      var video_list = $("#widget_#{@video_list.id}");
      setWidget(video_list);
    });         